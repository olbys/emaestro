<!DOCTYPE html>
<html>

<head>


    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;1,100;1,300;1,400&display=swap"
          rel="stylesheet">
    <!--    <link rel="stylesheet" href="assetss/bootstrap/css/bootstrap.min.css">-->
    <!--<link rel="stylesheet" href="assetss/materialize/css/materialize.min.css">-->
    <link rel="stylesheet" href="mix-sounds/mix-sounds.css" type="text/css">
    <link rel="stylesheet" href="groupe/new-group.css" type="text/css">
    <link rel="stylesheet" href="oscilateur/oscilateur.css" type="text/css">
    <link rel="stylesheet" href="grille-component/grilleComponent.css" type="text/css">
    <link rel="stylesheet" href="navBar/nav_bar.css">
    <link rel="stylesheet" href="index.css">


    <script src="https://code.jquery.com/jquery-2.1.0.js"></script>
    <!--    <script src="server.js" type="text/javascript"></script>-->
    <script type="text/javascript" src="assetss/materialize/js/materialize.min.js"></script>


    <meta charset="UTF-8"/>
    <title>eMaestro</title>

</head>

<body style="background-color:#ffffff;">

<div class="global-layout">

    <div class="layout-nav">
        <div class="navbar-custom">
            <div class="left-item">
                <p class="flow-text">eMaestro</p>
            </div>
            <div class="right-item">
                <div>
                    <button id="save-recorder" class="waves-effect waves-light">
                        <i class="material-icons left">file_download</i>
                        Conserver le son
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="layout-main">
        <div class="layout-mix">
            <form id="filesUpload" method="POST" enctype="multipart/form-data">
                <input class="form-control" type="file" name="file" id="fileInput">
                <div class="mix-control">
                    <div class="checkbox-control">
                        <label for="chooserecord" class="form-check-label">
                            Partie musicale
                        </label>
                        <input id="chooserecord" type="checkbox" value="mix">
                    </div>
                    <button id="btnsave" class="button-primary waves-effect waves-light" type="submit">
                        <i class="material-icons left">file_upload</i>
                        Importer un son
                    </button>
                </div>

                <div class="list-mix">
                    <div class="list-mix-file" id="show-list-mix-file"></div>
                </div>
                <div class="audio-recorder">
                    <audio id="audiosave" controls></audio>
                </div>


            </form>
        </div>

        <div class="layout-metronome">
            <svg width="75%" height="30%" id="emaestrobox" viewBox="0 0 69 62"
                 xmlns="http://www.w3.org/2000/svg">
            </svg>

            <div class="metro-control">
                <button id="playscore" class="button-primary waves-effect waves-light" type="button">
                    <i class="large material-icons">mic_noneaudiotrack</i>
                    Lancer le métronome et l'enregistrement
                </button>
                <button id="stopscorerecord" class="button-primary waves-effect waves-light" type="button">
                    <i class="large material-icons"> stopaudiotrack</i>
                    Arrêter l'enregistrement
                </button>
            </div>
        </div>
    </div>
    <div class="layout-bar">
        <section class="oscilateur-section">

            <div class="input-control">
                <div class="control">
                    <label class="input-label" for="valLa">Fréquence du "La"</label>
                    <input placeholder="Entrez la fréquence ici " id="valLa" type="text" class="">
                </div>
                <div id="diapason">
                    <button class="button-on-dark" type="button">
                        <i class="large material-icons">play_circle_outline</i>
                    </button>
                </div>
            </div>

            <div class="grille-control-item">
                <button id="clear_selected" class="button-on-dark" type="button">
                    <i class="large material-icons left">layers_clear</i>
                </button>
                <button id="add_repeat" class="button-on-dark" type="button">
                    <i><img src="../assetss/images/repeat-open.png" width="15"></i>
                    <i><img src="../assetss/images/repeat-close.png" width="15"></i>
                </button>

                <button id="add_fermata" class="button-on-dark" type="button">
                    <i><img src="../assetss/images/fermata.png" width="25"></i>
                </button>

                <button id="dacapo-infine" class="button-on-dark" type="button">
                    <i class="large material-icons left">add</i>
                    <span>DC</span>
                </button>

                <button id="coda-dacoda" class="button-on-dark" type="button">
                    <i><img src="../assetss/images/coda.png" width="25"></i>
                </button>

            </div>

            <div class="input-control">
                <div class="control">
                    <label class="input-label" for="debutPlay">Mesure de début: </label>
                    <input placeholder="début: 1 " id="debutPlay" type="number" class="">
                </div>
                <div class="control">
                    <label class="input-label" for="endPlay">Mesure de fin:</label>
                    <input placeholder="fin: 4" id="endPlay" type="number" class="">
                </div>
            </div>


        </section>
    </div>

    <div class="layout-mesures">

        <div class="grille--component">

            <div class="input-control--container">
                <div class="input-control">
                    <label class="input-label" for="delai_demarrage">Délai avant démarrage</label>
                    <input placeholder="ex: 12" id="delai_demarrage" value="0" type="text" class="">
                </div>

                <div class="input-control">
                    <label class="input-label" for="nombre_mesure">Nombre de mesures</label>
                    <input placeholder="12" id="nombre_mesure" type="text" class="">
                </div>

                <div class="input-control">
                    <label class="input-label" for="titre_partition">Titre de la partition</label>
                    <input placeholder="mon titre.." id="titre_partition" type="text" class="">
                </div>


                <div class="input-button">
                    <button class="button-on-dark" id="choose_morceau">
                        Choisir un morceau
                    </button>
                    <button id="sauvegarder_mesures" class="button-on-dark">
                        <i class="material-icons left">save</i>
                        Sauvegarder
                    </button>

                </div>
            </div>

            <div class="mesure-control-container">
                <!--      single mesure line          -->
                <div class="line-mesure">
                    <label class="input-label-white" for="tempo">Tempo : </label>
                    <input placeholder="80" class="ft-13" id="tempo" type="text" class="validate">
                </div>

                <!--      single mesure line          -->
                <div class="line-mesure">
                    <label class="input-label-white" for="tempo">Beat : </label>
                    <select class="" id="beat">
                        <option value=null disabled selected>Sélectionnez</option>
                        <option value=2>2nd</option>
                        <option value=4>4th</option>
                        <option value=8>8th</option>
                        <option value=3>dotted 2nd</option>
                        <option value=6>dotted 4th</option>
                        <option value=12>dotted 8th</option>
                    </select>
                </div>

                <!--      single mesure line          -->
                <div class="line-mesure">
                    <label class="input-label-white" for="armure">Armure : </label>
                    <select id="armure">
                        <option value=null disabled selected>Sélectionnez</option>
                        <option value=-7>B (7 b)</option>
                        <option value=-6>Gb (6 b)</option>
                        <option value=-5>Db (5 b)</option>
                        <option value=-4>Ab (4 b)</option>
                        <option value=-3>Eb (3 b)</option>
                        <option value=-2>Bb (2 b)</option>
                        <option value=-1>F (1 b)</option>
                        <option value=0>C (no accidental)</option>
                        <option value=1>G (1 #)</option>
                        <option value=2>D (2 #)</option>
                        <option value=3>A (3 #)</option>
                        <option value=4>E (4 #)</option>
                        <option value=5>B (5 #)</option>
                        <option value=6>F# (6 #)</option>
                        <option value=7>C# (7 #)</option>

                    </select>
                </div>

                <!--      single mesure line          -->
                <div class="line-mesure">
                    <label class="input-label-white" for="beat_mesure_time">Beat/mesure :</label>
                    <select id="beat_mesure_time">
                        <option value=null disabled selected>Sélectionnez</option>
                        <option value=2>2</option>
                        <option value=3>3</option>
                        <option value=4 selected>4</option>
                        <option value=5>5</option>
                        <option value=6>6</option>
                        <option value=7>7</option>
                        <option value=8>8</option>
                    </select>
                </div>

                <!--      single mesure line          -->
                <div class="line-mesure">
                    <label class="input-label-white" for="division_beat">Division du beat</label>
                    <select id="division_beat">
                        <option value=null disabled selected>Sélectionnez</option>
                        <option value=1>Simple</option>
                        <option value=2>Compound</option>
                    </select>
                </div>

                <!--      single mesure line          -->
                <div class="line-mesure">
                    <label class="input-label-white" for="intensite">Intensité :</label>
                    <select id="intensite">
                        <option value=null disabled selected>Sélectionnez</option>
                        <option value=0>ppp</option>
                        <option value=1>pp</option>
                        <option value=2>p</option>
                        <option value=3>mp</option>
                        <option value=4>mf</option>
                        <option value=5>f</option>
                        <option value=6>ff</option>
                        <option value=7>fff</option>
                    </select>
                </div>

                <!--      single mesure line          -->
                <div class="line-mesure">
                    <label class="input-label-white" for="alerte">Alerte :</label>
                    <select id="alerte">
                        <option value=null disabled selected>Sélectionnez</option>
                        <option value=0>ppp</option>
                        <option value=1>pp</option>
                        <option value=2>p</option>
                        <option value=3>mp</option>
                        <option value=4>mf</option>
                        <option value=5>f</option>
                        <option value=6>ff</option>
                        <option value=7>fff</option>
                    </select>
                </div>

                <!--      single mesure line          -->
                <div class="line-mesure">
                    <label class="input-label-white" for="pupitre">Pupitre :</label>
                    <select id="pupitre">
                        <option value=null disabled selected>Sélectionnez</option>
                        <option value=0>à compléter</option>
                        <option value=1>pp</option>
                    </select>
                </div>


            </div>

            <div id="grille" class="grille-controle-container">
                <!--            Load dynamically    -->
                <div class="grille-item" data-index="1">
                    <div class="item-row-1">
                        <div class="numero">1</div>
                        <div class="grille-item-selected"><i class="material-icons left">check_circle</i></div>
                    </div>


                </div>
            </div>

        </div>
    </div>

</div>

<div id="mesure-modal" class="modal">
    <div class="modal-content">
        <div class="modal-title">
            <h4>Configuration d'une reprise et autres phénomènes </h4>
            <div id="mesure-modal-close" class="close">&times;</div>
        </div>
        <div class="modal-body">
            <div class="input-control">
                <div class="label">Début de la reprise :</div>
                <select id="debut-reprise-select">
                    <option value=null>Sélectionnez</option>
                </select>
            </div>

            <div class="input-control">
                <div class="label">Fin de la reprise :</div>
                <select id="fin-reprise-select">
                    <option value=null>Sélectionnez</option>
                </select>
            </div>

            <div class="input-control">
                <div class="label">Nombre de répétition :</div>
                <input type="text" placeholder="ex :2" id="reprise-input-repeat" value="2">
            </div>

            <div class="input-button">
                <button id="save_rep" class="button-primary waves-effect waves-light">
                    <i class="material-icons left">repeat</i>
                    Valider
                </button>
            </div>

        </div>

    </div>

</div>

<div id="mesure-modal" class="dacapo-infine">
    <div class="modal-content">
        <div class="modal-title">
            <h4> Détection de la fine dans une reprise </h4>
            <div id="dacapo-modal-close" class="close">&times;</div>
        </div>
        <div class="modal-body">
            <div class="input-control">
                <div class="label">Nombre de passage dans la reprise avant d'exécuter la fine :</div>
                <select id="dacapo-infine-arret">
                    <option value=null>Sélectionnez</option>
                </select>
            </div>

            <div class="input-button">
                <button id="save-dacapo" class="button-primary waves-effect waves-light">
                    <i class="material-icons left">repeat</i>
                    Valider
                </button>
            </div>

        </div>

    </div>

</div>

<div id="mesure-modal" class="dacoda">
    <div class="modal-content">
        <div class="modal-title">
            <h4>Configuration du Da Coda </h4>
            <div id="dacoda-modal-close" class="close">&times;</div>
        </div>
        <div class="modal-body">
            <div class="input-control">
                <div class="label">Nombre de répétition avant d'aller à la Coda :</div>
                <select id="dacoda-select">
                    <option value=null>Sélectionnez</option>
                </select>
            </div>

            <div class="input-button">
                <button id="save-dacoda" class="button-primary waves-effect waves-light">
                    <i class="material-icons left">repeat</i>
                    Valider
                </button>
            </div>

        </div>

    </div>

</div>


<!-- choisir un morceau -->

<div id="mesure-modal" class="modal morceau">
    <div class="modal-content">
        <div class="modal-title">
            <h4>Liste des morceaux</h4>
            <div id="morceau-modal-close" class="close">&times;</div>
        </div>
        <div class="modal-body">
            <div class="input-control">
                <div class="label">Choisir un morceau :</div>
                <select id="morceau-select">
                    <option value=null>Sélectionnez</option>
                </select>
            </div>

            <div class="input-button">
                <button id="save_choose" class="button-primary waves-effect waves-light">
                    <i class="material-icons left">repeat</i>
                    Valider
                </button>
            </div>

        </div>

    </div>

</div>

<!-- pop-up configuration du point d'orgue -->

<div id="mesure-modal" class="modal fermata">
    <div class="modal-content">
        <div class="modal-title">
            <h4>Configuration du point d'orgue</h4>
            <div id="fermata-modal-close" class="close">&times;</div>
        </div>
        <div class="modal-body">
            <div class="input-control">
                <div class="label">Sélectionnez un temps :</div>
                <select id="fermata-select">
                    <option value=null>Sélectionnez</option>
                </select>
            </div>
            <div class="input-control">
                <div class="label">Durée du temps :</div>
                <input type="text" placeholder="ex : 5 " id="period-input">
            </div>
            <div class="input-button">
                <button id="save_config" class="button-primary waves-effect waves-light">
                    <i class="material-icons left">repeat</i>
                    Valider
                </button>
            </div>

        </div>

    </div>

</div>

<!-- Changer le titre d'un son sélectionné -->

<div id="mesure-modal" class="modal son">
    <div class="modal-content">
        <div class="modal-title">
            <h4>Modification du titre d'un son</h4>
            <div id="mesure-modal-close-sound" class="close">&times;</div>
        </div>
        <div class="modal-body">
            <div class="input-control">
                <div class="label"> Nouveau titre :</div>
                <input type="text" placeholder="ex :2" id="input-sound-title" value="Ecrire le nouveau titre">
            </div>

            <div class="input-button">
                <button id="save_sound-title" class="button-primary waves-effect waves-light">
                    <i class="material-icons left">repeat</i>
                    Valider
                </button>
            </div>

        </div>

    </div>

</div>

<!-- Démarrer le métronome à partir et jusqu'à une mesure donné -->


<!-- Démarrer le métronome à partir et jusqu'à une mesure donné lors d'une reprise -->

<div id="mesure-modal" class="modal metronomeReprise">
    <div class="modal-content">
        <div class="modal-title">
            <h4> Nous avons détecté une reprise dans l'intervalle sélectionné.</h4>
            <div id="mesure-modal-close-mesure-reprise" class="close">&times;</div>
        </div>
        <div class="modal-body">
            <div class="input-control">
                <div class="label"> Sélectionner le nombre de passage de cette reprise que vous souhaitez effectuer: </div>
                <select id="repeat-select">
                    <option value=null>Sélectionner</option>
                </select>
            </div>

            <div class="input-button">
                <button id="save_mesure-reprise" class="button-primary waves-effect waves-light">
                    <i class="material-icons left">repeat</i>
                    Valider
                </button>
            </div>

        </div>

    </div>

</div>

</body>


<!--<script type="text/javascript" src="assetss/materialize/js/materialize.min.js"></script>-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pizzicato/0.6.4/Pizzicato.js"></script>
<script type="text/javascript" src="/js/ressource/classes.js"></script>
<script type="text/javascript" src="/js/ressource/source.js"></script>
<script type="text/javascript" src="grille-component/grilleComponent.js"></script>
<script type="text/javascript" src="oscilateur/oscilateur.js"></script>
<script type="text/javascript" src="mix-sounds/mix-sounds.js"></script>
<script type="text/javascript" src="Mediarecorder.js"></script>

</html>
